---
title: "DB 트랜잭션, 회복"
date: 2025-01-29 11:00:00
tags: 
  - Database
---


- DB 세션에 대해서 설명해주세요.

  **DB 세션은 WAS나 MySQL Workbench 같은 DB 접근 클라이언트와 DB가 맺어놓은 커넥션을 통해 들어온 쿼리 요청을 실행합니다.**

  **커넥션 하나에 세션 하나가 대응 되며, 트랜잭션 수행 도중에는 세션마다 테이블 조회 결과가 달라질 수 있습니다.**

- Commit에 대해서 설명해주세요.

  **Commit은 등록,수정,삭제 등의 쿼리 수행을 통해서, 임시로 변경된 데이터를 DB에 반영하는 것입니다.**

  **정상적으로 트랜잭션이 수행된다면 Commit을 통해 트랜잭션 결과를 DB에 반영해야합니다.**

- Rollback에 대해서 설명해주세요.

  **Rollback은 등록,수정,삭제 등의 쿼리 수행을 통해서, 임시로 변경된 데이터를 DB에 반영하지 않는 것입니다.**

  **비정상적으로 트랜잭션이 수행된다면 Rollback을 통해 트랜잭션 결과를 DB에 반영하지 말아야합니다.**

- Auto Commit 설정에 대해서 설명해주세요.

  **Auto Commit을 true로 설정하면 쿼리를 하나 하나 실행할때마다 자동으로 Commit이 호출됩니다.**

  **Auto Commit은 false로 설정하면 직접 수동으로 Commit 또는 Rollback을 호출해야합니다.**

  **Auto Commit을 false로 설정하는 것을 트랜잭션을 시작한다고 표현할 수 있습니다.**

- 트랜잭션에 대해 설명해주세요.

  **트랜잭션은 DB에서 하나의 논리적인 작업을 처리하기 위한 단위입니다.**

  **트랜잭션은 정상적으로 수행될 경우 commit이 수행되고,**

  **비정상적으로 수행될 경우 rollback이 수행됩니다.**

- 트랜잭션의 성질 ACID에 대해서 설명해주세요.

  **원자성은 트랜잭션에 포함된 작업이 모두 수행되거나 모두 수행되지 않는다는 성질입니다.**

  **일관성은 트랜잭션을 수행하기 전후 데이터베이스는 항상 일관된 데이터 상태를 유지해야하는 성질입니다.**

  격리성**은 어떤 테이블에 대해 수행중인 트랜잭션이 있다면 다른 트랜잭션이 끼어들 수 없다는 성질입니다.**

  **지속성은 성공적으로 수행한 트랜잭션의 결과는 데이터베이스에 영구적으로 반영되어야 한다는 성질입니다.**

- 트랜잭션 격리 수준이 뭘까요?

  **트랜잭션간의 격리 수준을 뜻합니다.**

  **동시에 요청되는 여러 트랜잭션들에 대해 각각 격리성을 완벽하게 보장하려면,**

  **트랜잭션을 한개씩 순서대로 처리해야합니다. 하지만 이렇게하면 동시 처리 성능이 매우 나빠집니다.**

  **이런 문제로 인해 ANSI 표준에서는 트랜잭션 격리 수준을 4가지로 나누어 정리했습니다.**

- 트랜잭션 격리 수준 READ UNCOMMITTIED에 대해서 설명해주세요.

  **커밋하지 않은 변경 데이터를 읽을 수 있는 수준입니다.**

  **트랜잭션 수행중에 다른 트랜잭션이 변경한 데이터를 조회할 수 있게 되는**

  **DIRTY READ 현상이 발생합니다.**

- 트랜잭션 격리 수준 READ COMMITTED에 대해서 설명해주세요.

  **커밋한 변경 데이터를 읽을 수 있는 수준입니다.**

  **트랜잭션 수행중에 다른 트랜잭션이 변경하고 커밋한 데이터를 조회할 수 있는데,**

  **반복적으로 같은 데이터를 읽을 수 없는 NON-REPEATABLE READ 현상이 발생합니다.**

- 트랜잭션 격리 수준 REPEATABLE READ에 대해서 설명해주세요.

  **변경 데이터를 읽을 수 없는 수준입니다.**

  **커밋한 변경 데이터도 읽을 수 없습니다.**

  **하지만 트랜잭션 수행중에 다른 트랜잭션이 삽입하고 커밋한 데이터는 조회할 수 있습니다.**

  **이를 PHANTOM READ라고 합니다.**

- 트랜잭션 격리 수준 SERIALIZABLE에 대해서 설명해주세요.

  **모든 변경 사항을 읽을 수 없는 수준입니다.**

  **트랜잭션 수행중에 다른 트랜잭션의 모든 변경 사항을 조회할 수 없습니다.**

  **완벽한 격리성을 제공하지만 동시성 처리 성능이 매우 떨어집니다.**

- DB 동시성 제어에 대해서 설명해주세요.

  **동시에 여러개의 트랜잭션을 수행할때 데이터베이스의 일관성을 파괴하지 않도록 제어하는 것을 뜻합니다.**

  **트랜잭션 격리 수준 조절과 락을 사용하여 동시성을 제어할 수 있습니다.**

- 갱신 손실 문제에 대해 설명해주세요.

  **두 개의 트랜잭션이 하나의 데이터를 동시에 변경할때,**

  **결과적으로 한 트랜잭션의 결과만 반영되는 것을 뜻합니다.**

  **락을 통해서 갱신 손실 문제를 방지할 수 있습니다.**

- DB 락에 대해서 설명해주세요.

  **락은 트랜잭션에서 접근하고 있는 데이터에 다른 트랜잭션이 접근하지 못하도록 잠가두는 것을 뜻합니다.**

  **어떤 세션이 트랜잭션을 시작한후 데이터를 변경하고 싶다면 우선 락을 획득 해야합니다.**

  **만약 이미 다른 트랜잭션이 락을 획득하고 데이터를 변경하고 있다면,**

  **락을 획득하기까지 대기합니다. 이때 특정 대기 시간을 넘어가면 락 타임아웃 오류가 발생합니다.**

- DB 데드락에 대해서 설명해주세요.

  **데드락이란 서로 다른 트랜잭션 2개가 같은 데이터에 대한 락을 서로 획득하려고 무한정 대기하는 것을 뜻합니다.**

- DB 회복에 대해서 설명해주세요.

  **DB에 장애가 발생했을때 데이터베이스를 일관성 있는 상태로 되돌리는 기능입니다.**

  **회복은 트랜잭션 단위로 진행됩니다.**

- REDO, UNDO에 대해서 설명해주세요.

  **REDO는 커밋 내역이 있는 트랜잭션을 DB에 다시 반영하는 것입니다.**

  **UNDO는 커밋 내역이 없는 트랜잭션을 DB에서 되돌리는 것을 말합니다.**

- 체크포인트 회복 기법에 대해서 설명해주세요.

  **일정 시간 단위로 DB와 트랜잭션 로그 파일을 동기화 한다음 동시화 시점을 로그 파일에 기록해두는 기법입니다.**

  **체크포인트 이후 COMMIT 기록이 있는 트랜잭션의 경우 REDO를 진행하고,**

  **체크포인트 이후 COMMIT 기록이 없는 트랜잭션의 경우 UNDO를 진행합니다.**

- MySQL InnoDB의 기본 트랜잭션 고립 수준은 뭘까요?