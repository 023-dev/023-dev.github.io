---
title: "인덱스(Index)"
date: 2025-01-16 18:00:00
tags: 
  - Database
  - Index
---

인덱스는 데이터베이스에서 특정 데이터를 빠르게 조회하기 위해 사용하는 Key-Value 타입의 자료구조이다.
영어사전의 알파벳순 정렬을 예로 들 수 있다.
특정 영단어를 영어전전에서 찾으려 할 때 이미 알파벳 순으로 정렬되어 있기에 특정 영단어의 첫 알파벳 페이지로 가면,
영어사전의 처음부터 뒤지는 것보다 빠르게 찾을 수 있다.

## 인덱스 성능

인덱스의 성능을 이해하기 위해하기 위해 랜덤 I/O와 순차 I/O 개념을 알아야한다.

먼저 랜덤 I/O는 데이터가 저장된 위치가 분산되어 있을 때, 데이터가 저장된 위치에 관계없이 특정 위치에서 데이터를 읽거나 쓰는 방식이다.


## 인덱스의 동작 방식
그럼




## 랜덤 I/O와 순차 I/O
- 랜덤 I/O는 임의의 위치에 있는 데이터를 읽거나 쓰는 입출력 작업이다.
- 순차 I/O는 연속적인 순서대로 데이터를 읽거나 쓰는 입출력 작업이다.

HDD에서 랜덤 I/O는 순차 I/O에 비해 헤더의 움직임이 많기 때문에 느립니다. 이는 SSD에서도 마찬가지입니다.

## 인덱스
- 인덱스는 컬럼의 값과 레코드의 주소를 Key-Value 삼아놓은 정보이다.
- 데이터베이스는 인덱스를 통해 빠르게 레코드를 조회할 수 있다. 
- 빠른 조회를 위해 인덱스는 항상 정렬되어 있다는 특징이 있는데, 이 때문에 레코드의 삽입/수정/삭제 성능이 희생된다는 단점이 있다.

## 인덱스의 동작 방식
B Tree 인덱스 기준으로 설명 드리겠습니다.
사용자 요청으로 들어온 select 쿼리의 where에 인덱스가 걸린 컬럼이 조건으로 들어있다면,
컬럼 값에 해당하는 레코드를 찾기위해 B Tree의 루트 노드부터 시작해서 브랜치 노드를 거쳐 해당하는 리프 노드를 찾습니다.
그 다음 리프 노드에 있는 레코드의 실제 주소값을 따라 데이터 파일에서 레코드를 조회해옵니다. 
어떤 기준으로 인덱스를 설정해야할까요?
검색 조건에 주로 사용되고 카디널리티가 높은 컬럼을 인덱스로 설정하면 좋습니다.
카디널리티는 인덱스에 해당하는 컬럼 기준으로 테이블에서 유일한 레코드 개수를 의미합니다.
카디널리티가 높을 컬럼에 인덱스를 걸면 그만큼 검색 대상이 줄어들기 때문에 빠르게 레코드에 접근할 수 있습니다.

## 테이블에 인덱스를 많이 설정하면 좋을까?

  **인덱스를 많이 설정하면 좋지 않습니다.**

  **인덱스 자체를 저장하는 공간이 필요하기도 하고,**

  **인덱스는 빠른 검색을 위해 항상 정렬된 상태를 유지해야하므로,**

  **인덱스가 많아진다면 데이터 삽입, 수정, 삭제 성능이 저하될 우려가 있습니다.**

  **따라서 인덱스를 추가할때는 데이터의 삽입,수정,삭제 성능을 얼마나 희생하고,**

  **읽기 성능은 얼마나 빠르게 해야할지 고민하고 결정해야합니다.**

- 커버링 인덱스(Covering index)

  **쿼리 조회 결과가 인덱스에 해당하는 컬럼 값으로만 이루어진 것을 커버링 인덱스라고 합니다.**

  **커버링 인덱스로 처리되는 쿼리는 디스크의 레코드를 읽지 않아도 되기 때문에 그만큼 랜덤 엑세스가 줄어들고 성능은 빨라집니다.**

- 다중 컬럼 인덱스(Multi-column index, 복합 인덱스)

  **다중 컬럼 인덱스는 2개 이상의 컬럼으로 이루어진 인덱스입니다.**

  **2개의 컬럼으로 이루어진 인덱스가 있을때,**

  **인덱스의 두 번째 컬럼은 첫 번째 컬럼에 의존해서 정렬된다는 특징이 있다는 것을 고려해서 사용해야합니다.**

